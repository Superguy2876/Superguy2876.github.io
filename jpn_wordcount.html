<!DOCTYPE html>
<html>
<head>
    <title>Japanese Word Frequency Counter</title>
    <script src="https://cdn.jsdelivr.net/npm/tiny-segmenter@0.2.0/dist/tiny-segmenter-0.2.0.min.js"></script>
</head>
<body>
    <h1>Japanese Word Frequency Counter</h1>
    <form id="wordForm">
        <textarea id="inputText" rows="4" cols="50"></textarea><br>
        <button type="submit">Count Words</button>
    </form>
    <div id="output"></div>

    <script>
        document.getElementById('wordForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const inputText = document.getElementById('inputText').value;
            var segmenter = new TinySegmenter();
            var segs = segmenter.segment(inputText);
            var wordCounts = new Map();

            for (var i = 0; i < segs.length; i++) {
                if (wordCounts.has(segs[i])) {
                    wordCounts.set(segs[i], wordCounts.get(segs[i]) + 1);
                } else {
                    wordCounts.set(segs[i], 1);
                }
            }

            // Sort wordCounts by value in descending order
            const sortedWordCounts = new Map([...wordCounts.entries()].sort((a, b) => b[1] - a[1]));

            const outputDiv = document.getElementById('output');
            outputDiv.innerHTML = "";

            // Output the results
            sortedWordCounts.forEach((value, key) => {
                outputDiv.innerHTML += "<p>" + key + ": " + value + "</p>";
            });
        });
    </script>
</body>
</html>
